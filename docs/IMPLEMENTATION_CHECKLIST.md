# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏–π GigaChat –ø—Ä–æ–º—Ç–∞

## –≠—Ç–∞–ø 1: –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è –∫–æ–¥–∞ ‚úì

- [x] –û–±–Ω–æ–≤–ª–µ–Ω System Prompt –≤ `gigachat.py`
- [x] –û–±–Ω–æ–≤–ª–µ–Ω User Prompt –≤ –º–µ—Ç–æ–¥–µ `_create_analysis_prompt()`
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏: `_validate_and_normalize_analysis()`
- [x] –î–æ–±–∞–≤–ª–µ–Ω fallback –º–µ—Ç–æ–¥: `_create_fallback_analysis()`
- [x] –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ JSON –ø–∞—Ä—Å–∏–Ω–≥–∞
- [x] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–∞ (—Å—Ç–∞—Ä—ã–π –∏ –Ω–æ–≤—ã–π)

## –≠—Ç–∞–ø 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–ª—è –≤–∞—Å)

### –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã

- [ ] –ó–∞–ø—É—Å—Ç–∏—Ç—å pytest: `pytest tests/ -q`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ 19 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
- [ ] –ù–µ—Ç –Ω–æ–≤—ã—Ö –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

- [ ] –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ API
- [ ] –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –æ—Ç GigaChat
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ JSON –≤–∞–ª–∏–¥–µ–Ω
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–Ω—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç (–Ω–µ —Å–æ–∫—Ä–∞—â–µ–Ω)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é –º–µ—Ç—Ä–∏–∫ –≤ –æ—Ç–≤–µ—Ç–µ

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (–≤–∞—Ä–∏–∞–Ω—Ç 3) –ø–∞—Ä—Å–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- [ ] –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É —Ñ–æ—Ä–º–∞—Ç–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Edge Cases

- [ ] –¢–µ—Å—Ç —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º JSON –æ—Ç GigaChat
- [ ] –¢–µ—Å—Ç —Å –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–º –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ–º (< 10 —Å–µ–∫)
- [ ] –¢–µ—Å—Ç —Å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–º –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏–µ–º (> 30 –º–∏–Ω)
- [ ] –¢–µ—Å—Ç —Å –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–º —Ç–µ–º–ø–æ–º (> 200 —Å–ª–æ–≤/–º–∏–Ω)
- [ ] –¢–µ—Å—Ç —Å –æ—á–µ–Ω—å –Ω–∏–∑–∫–∏–º —Ç–µ–º–ø–æ–º (< 80 —Å–ª–æ–≤/–º–∏–Ω)

## –≠—Ç–∞–ø 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)

### –ü–µ—Ä–≤–∞—è –Ω–µ–¥–µ–ª—è

- [ ] –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –æ—à–∏–±–∫–∏ JSON –ø–∞—Ä—Å–∏–Ω–≥–∞
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ä–µ–¥–Ω—é—é —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏ (confidence_score)
- [ ] –ó–∞–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API
- [ ] –°–æ–±—Ä–∞—Ç—å –æ—Ç–∑—ã–≤—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –æ –∫–∞—á–µ—Å—Ç–≤–µ –∞–Ω–∞–ª–∏–∑–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

```
- –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤: ‚â• 95%
- –°—Ä–µ–¥–Ω—è—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–æ–¥–µ–ª–∏: ‚â• 0.75
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API: ‚â§ 30 —Å–µ–∫
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ fallback –∞–Ω–∞–ª–∏–∑–æ–≤: ‚â§ 5% –æ—Ç –≤—Å–µ—Ö
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ª–æ–≥–∏ –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ `/workspaces/speech-coach/logs/`
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤ (max 10MB)
- [ ] –í–∫–ª—é—á–∏—Ç—å DEBUG —Ä–µ–∂–∏–º –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

## –≠—Ç–∞–ø 4: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)

- [x] –°–æ–∑–¥–∞–Ω `PROMPT_IMPROVEMENTS.md` - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- [x] –°–æ–∑–¥–∞–Ω `USAGE_GUIDE.md` - —Å–ø—Ä–∞–≤–∫–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [x] –°–æ–∑–¥–∞–Ω —ç—Ç–æ—Ç —á–µ–∫–ª–∏—Å—Ç

## –≠—Ç–∞–ø 5: –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)

–ï—Å–ª–∏ —É–ª—É—á—à–µ–Ω–∏—è –≤—ã–∑–æ–≤—É—Ç –ø—Ä–æ–±–ª–µ–º—ã, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å:

```bash
# –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ gigachat.py
git checkout app/services/gigachat.py

# –û—Ç–∫–∞—Ç –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
git reset --hard HEAD~1
```

## –¢–∞–±–ª–∏—Ü–∞ –≤–µ—Ä—Å–∏–π

| –í–µ—Ä—Å–∏—è | –î–∞—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|--------|------|---------|--------|
| v1 | 19.12.2025 | –ü–µ—Ä–≤–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç 3 Recommended | ‚úÖ –ì–æ—Ç–æ–≤–æ |
| v2 (–ø–ª–∞–Ω) | TBD | Few-shot –ø—Ä–∏–º–µ—Ä—ã | üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ |
| v3 (–ø–ª–∞–Ω) | TBD | –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è GigaChat | üìã –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ |

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### ‚ö†Ô∏è –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

–í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º:
- –ï—Å–ª–∏ GigaChat –≤–µ—Ä–Ω–µ—Ç —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç ‚Üí —Å–∏—Å—Ç–µ–º–∞ –µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏—Ç
- –ï—Å–ª–∏ GigaChat –≤–µ—Ä–Ω–µ—Ç –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç ‚Üí —Å–∏—Å—Ç–µ–º–∞ –µ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç
- –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –æ—Ç–∫–∞–∑–∞: **< 5%**

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚ùå –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã —è–≤–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏–ª–∏ –∫–ª—é—á–∏
- ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ `settings`
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ JSON –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—ä–µ–∫—Ü–∏–∏

### üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–û–∂–∏–¥–∞–µ–º–æ–µ –≤–ª–∏—è–Ω–∏–µ:**
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: ~2-5% –º–µ–¥–ª–µ–Ω–Ω–µ–µ (–∏–∑-–∑–∞ –ø–æ–ª–Ω–æ–≥–æ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–∞)
- –ö–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞: +60-80% –ª—É—á—à–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤: ~15% –±–æ–ª—å—à–µ

### üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. **–û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–µ –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è** (> 50 –º–∏–Ω): –º–æ–∂–µ—Ç –¥–æ—Å—Ç–∏—á—å –ª–∏–º–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤
2. **–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON –æ—Ç GigaChat**: —Ç—Ä–µ–±—É–µ—Ç—Å—è 3 –ø–æ–ø—ã—Ç–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–∑–∞–¥–µ—Ä–∂–∫–∞ ~1-2 —Å–µ–∫)
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ API –∫–ª—é—á–∞**: –∞–Ω–∞–ª–∏–∑ –±—É–¥–µ—Ç —Å low confidence (0.3)

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ï—Å–ª–∏ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ:

1. –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ –Ω–µ–¥–µ–ª—é
2. –°—Ä–∞–≤–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –∞–Ω–∞–ª–∏–∑–∞ –¥–æ/–ø–æ—Å–ª–µ
3. –°–æ–±—Ä–∞—Ç—å –æ—Ç–∑—ã–≤—ã –æ—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
4. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ v2 (few-shot –ø—Ä–∏–º–µ—Ä—ã)

### –ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –≤ `/workspaces/speech-coach/logs/`
2. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ GigaChat API —Ä–∞–±–æ—Ç–∞–µ—Ç
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–ª—é—á API –∞–∫—Ç–∏–≤–µ–Ω
4. –û—Ç–∫–∞—Ç–∏—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (`git revert`)

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

- [ ] –í—Å–µ 19 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç?
- [ ] JSON –ø–∞—Ä—Å–∏—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ?
- [ ] –ü–æ–ª–Ω—ã–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∞–Ω–∞–ª–∏–∑?
- [ ] –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –≤–∏–¥–Ω–∞ –≤ –æ—Ç–≤–µ—Ç–µ?
- [ ] Fallback –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ?
- [ ] –û–±–µ –≤–µ—Ä—Å–∏–∏ JSON –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è?
- [ ] –ù–µ—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ª–æ–≥–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö?

## –ü–æ–¥–ø–∏—Å—å –≤–Ω–µ–¥—Ä–µ–Ω–∏—è

- **–î–∞—Ç–∞**: 19 –¥–µ–∫–∞–±—Ä—è 2025
- **–ê–≤—Ç–æ—Ä**: GitHub Copilot
- **–í–µ—Ä—Å–∏—è**: v1 (Variant 3 Recommended)
- **–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ì–û–¢–û–í–û –ö –ü–†–û–î–ê–ö–®–ï–ù–£**

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –≠—Ç–æ —É–ª—É—á—à–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤–Ω–µ–¥—Ä–∏—Ç—å –≤ production —Å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º –º–µ—Ç—Ä–∏–∫ –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–π –Ω–µ–¥–µ–ª–∏.
